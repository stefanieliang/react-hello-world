<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>附加条款对比工具</title>
</head>
<body>

    <p>http://aitec-web-dev.jiangtai.com/_gw/aitec-svc/schemas/JT000020201125352/001004</p>

    <p>http://aitec-web-dev.jiangtai.com/_gw/aitec-svc/clauses/schemaAdditionals?clauseName=&riskCategoryFourCode=0201010300&riskCategoryThreeCode=02010103&riskCategoryTwoCode=020101&riskCategoryOneCode=0201&pageNum=1&pageSize=50&riskCode=001004&schemaCode=JT000020201125352</p>

    <label for="industry">行业</label>
    <select name="行业" id="industry">
        <option value="yc">烟草</option>
        <option value="gt">钢铁</option>
        <option value="syly">商业楼宇</option>
        <option value="jd">酒店</option>
    </select>

    <label for="riskCode">险种</label>
    <select name="险种" id="riskCode">
        <option value="PAR">财产一切险</option>
        <option value="MB">机器损害险</option>
        <option value="PL">公众责任险</option>
        <option value="EL">雇主责任险</option>
    </select>




    <ol>
        <h3>烟草</h3>
        <ol>
            <li><h4>财产一切险</h4></li>
            <table border="1" style="border-spacing: inherit;width: 100%;">
                <th>
                    <td>全选[是]</td>
                    <td>全选[否]</td>
                    <td>正确的</td>
                    <td>接口多了</td>
                    <td>接口少了</td>
                </th>
                <tr>
                    <td>接口1返回</td>
                    <td>
                        <button onclick = "compare('yc_cc_api1_Y',1)" >对比</button><br/>
                        <textarea type="text" id="yc_cc_api1_Y" rows="20" cols="30"></textarea>
                    </td>
                    <td>
                        <button onclick = "compare('yc_cc_api1_N',1)" >对比</button><br/>
                        <textarea type="text" id="yc_cc_api1_N" rows="20" cols="30"></textarea>
                    </td>
                    <td id="yc_cc_api1_right"></td>
                    <td id="yc_cc_api1_more"></td>
                    <td id="yc_cc_api1_less"></td>
                </tr>
                <tr>
                    <td>接口2返回</td>
                    <td>
                        <button onclick = "compare('yc_cc_api2_Y',2)" >对比</button><br/>
                        <textarea type="text" id="yc_cc_api2_Y" rows="20" cols="30"></textarea>
                    </td>
                    <td>
                        <button onclick = "compare('yc_cc_api2_N',2)" >对比</button><br/>
                        <textarea type="text" id="yc_cc_api2_N" rows="20" cols="30"></textarea>
                    </td>
                    <td id="yc_cc_api2_right"></td>
                    <td id="yc_cc_api2_more"></td>
                    <td id="yc_cc_api2_less"></td>
                </tr>
            </table>
            <li><h4>机器损害险</h4></li>
            <li><h4>公众责任险</h4></li>
            <li><h4>雇主责任险</h4></li>
        </ol>
        <h3>酒店</h3>
        <ol>
            <li><h4>财产一切险</h4></li>
            <li><h4>机器损害险</h4></li>
            <li><h4>公众责任险</h4></li>
            <table border="1" style="border-spacing: inherit;width: 100%;">
                <th>
                    <td>全选[是]</td>
                    <td>全选[否]</td>
                    <td>正确的</td>
                    <td>接口多了</td>
                    <td>接口少了</td>
                </th>
                <tr>
                    <td>接口1返回</td>
                    <td>
                        <button onclick = "compare('jd_PL_api1_Y',1)" >对比</button><br/>
                        <textarea type="text" id="jd_PL_api1_Y" rows="20" cols="30"></textarea>
                    </td>
                    <td>
                        <button onclick = "compare('jd_PL_api1_N',1)" >对比</button><br/>
                        <textarea type="text" id="jd_PL_api1_N" rows="20" cols="30"></textarea>
                    </td>
                    <td id="jd_PL_api1_right"></td>
                    <td id="jd_PL_api1_more"></td>
                    <td id="jd_PL_api1_less"></td>
                </tr>
                <tr>
                    <td>接口2返回</td>
                    <td>
                        <button onclick = "compare('jd_PL_api2_Y',2)" >对比</button><br/>
                        <textarea type="text" id="jd_PL_api2_Y" rows="20" cols="30"></textarea>
                    </td>
                    <td>
                        <button onclick = "compare('jd_PL_api2_N',2)" >对比</button><br/>
                        <textarea type="text" id="jd_PL_api2_N" rows="20" cols="30"></textarea>
                    </td>
                    <td id="jd_PL_api2_right"></td>
                    <td id="jd_PL_api2_more"></td>
                    <td id="jd_PL_api2_less"></td>
                </tr>
            </table>
            <li><h4>雇主责任险</h4></li>
        </ol>
        <h3>商业楼宇</h3>
        <ol>
            <li><h4>财产一切险</h4></li>
            <li><h4>机器损害险</h4></li>
            <li><h4>公众责任险</h4></li>
            <li><h4>雇主责任险</h4></li>
        </ol>
        <h3>钢铁</h3>
        <ol>
            <li><h4>财产一切险</h4></li>
            <li><h4>机器损害险</h4></li>
            <li><h4>公众责任险</h4></li>
            <table border="1" style="border-spacing: inherit;width: 100%;">
                <th>
                    <td>全选[是]</td>
                    <td>全选[否]</td>
                    <td>正确的</td>
                    <td>接口多了</td>
                    <td>接口少了</td>
                </th>
                <tr>
                    <td>接口1返回</td>
                    <td>
                        <button onclick = "compare('gt_PL_api1_Y',1)" >对比</button><br/>
                        <textarea type="text" id="gt_PL_api1_Y" rows="20" cols="30"></textarea>
                    </td>
                    <td>
                        <button onclick = "compare('gt_PL_api1_N',1)" >对比</button><br/>
                        <textarea type="text" id="gt_PL_api1_N" rows="20" cols="30"></textarea>
                    </td>
                    <td id="gt_PL_api1_right"></td>
                    <td id="gt_PL_api1_more"></td>
                    <td id="gt_PL_api1_less"></td>
                </tr>
                <tr>
                    <td>接口2返回</td>
                    <td>
                        <button onclick = "compare('gt_PL_api2_Y',2)" >对比</button><br/>
                        <textarea type="text" id="gt_PL_api2_Y" rows="20" cols="30"></textarea>
                    </td>
                    <td>
                        <button onclick = "compare('gt_PL_api2_N',2)" >对比</button><br/>
                        <textarea type="text" id="gt_PL_api2_N" rows="20" cols="30"></textarea>
                    </td>
                    <td id="gt_PL_api2_right"></td>
                    <td id="gt_PL_api2_more"></td>
                    <td id="gt_PL_api2_less"></td>
                </tr>
            </table>
            <li><h4>雇主责任险</h4></li>
        </ol>
    </ol>
    <script>
        // 烟草-财产一切险-固定
        const YC_CC_1 = ['错误和遗漏条款', '不受控制条款', '不使失效条款', '违反条件条款', '时间调整条款（72小时）', '重置价值条款', '自动恢复保险金额条款', '放弃代位追偿扩展条款', '指定公估人条款', '预付赔款条款', '地震扩展条款', '罢工、暴乱及民众骚乱扩展条款', '恶意破坏扩展条款', '增加资产扩展条款', '保单不得注销条款', '清理残骸费用扩展条款', '专业费用扩展条款', '特别费用扩展条款（包括星期日、节假日、夜晚加班）', '空运费扩展条款', '灭火费用扩展条款', '索赔费用条款', '公共当局扩展条款', '临时保护措施扩展条款', '重新安装费用条款', '建筑物外部附属设施扩展条款', '露天存放及简易建筑内财产扩展条款', '烟熏扩展条款/烟损条款', '自动喷淋系统水损扩展条款', '玻璃破碎扩展条款', '建筑物变动条款', '成对或成套设备条款', '其他物品扩展条款', '供应中断扩展条款', '公用设施故障条款', '虫蛀、鼠咬损失扩展条款', '检修扩展条款'];
        // 烟草-财产一切险-问卷
        const YC_CC_2 = ['锅炉、压力容器扩展条款','便携式设备扩展条款','存货变质条款','仓储财产申报条款','媒介物扩展条款','在建工程（含保险期内新增工程）扩展条款','恐怖活动扩展条款','赔款接受人条款']
        // 烟草-财产一切险-特殊
        const YC_CC_3 = ['自燃扩展条款','霉变条款','导线“舞动”损失扩展条款','“污闪”损失扩展条款','液体泄漏条款','污染风险扩展条款','起重、运输机械扩展条款','流动机械扩展条款','合同价格扩展条款','50/50条款','冷库扩展条款','85％扩展条款','分摊减免条款','索赔单据条款','紧急抢险条款','复制费用扩展条款','盗窃、抢劫扩展条款','承保全部盗窃条款','水箱、水管爆裂条款','碰撞扩展条款','自动升值扩展条款','扩展车辆测试条款','在制品损失保险条款','车辆装载物扩展条款','厂区间临时移动扩展条款','临时移动扩展条款','内陆运输扩展条款','厂内迁移条款','场所外财产条款','自动承保新地址与未指明仓储地址条款','草木特约条款']

        // 酒店-公众责任险-固定
        const JD_PL_1 = ['错误与遗漏条款','不使失效条款','不受控制条款','违反条件条款','放弃代位追偿权利条款','罢工、暴乱、民众骚动及恶意破坏条款','火灾、爆炸、烟熏、水损责任条款','保单不得注销条款','电梯、机器及大厦自动装置条款','广告及装饰装置责任条款','卫生装置条款','车辆装卸责任条款','建筑物改变条款','提供物品及服务条款','服务人员条款','暴力行为、抢劫责任条款','人身侵害责任条款','急救费用条款','急救责任条款','客人财产责任条款','恐怖活动条款','交叉责任条款'];
        // 酒店-公众责任险-问卷
        const JD_PL_2 = ['停车场责任条款','锅炉爆炸责任条款','食品、饮料责任条款','承租人责任条款','出租人责任条款','董事及高级管理人员临时海外出差责任条款','临时海外公干责任条款','社交及娱乐场所责任条款','游泳池及健身房责任条款','租用财产条款'];
        // 酒店-公众责任险-特殊
        const JD_PL_3 = ['叉车责任条款','展览会责任条款','污染条款','监管之财产条款','董事及高级管理人员个人第三者责任险'];

        // 钢铁-公众责任险-固定
        const GT_PL_1 = ['错误与遗漏条款','不使失效条款','不受控制条款','违反条件条款','放弃代位追偿权利条款','罢工、暴乱、民众骚动及恶意破坏条款','火灾、爆炸、烟熏、水损责任条款','保单不得注销条款','电梯、机器及大厦自动装置条款','广告及装饰装置责任条款','卫生装置条款','车辆装卸责任条款','建筑物改变条款','提供物品及服务条款','服务人员条款','暴力行为、抢劫责任条款','人身侵害责任条款','急救费用条款','急救责任条款','客人财产责任条款','叉车责任条款','污染条款'];
        // 钢铁-公众责任险-问卷
        const GT_PL_2 = ['停车场责任条款','锅炉爆炸责任条款','社交及娱乐场所责任条款','食品、饮料责任条款','承租人责任条款','出租人责任条款'];
        // 钢铁-公众责任险-特殊
        const GT_PL_3 = ['恐怖活动条款','展览会责任条款','交叉责任条款','监管之财产条款','董事及高级管理人员个人第三者责任险','租用财产条款','董事及高级管理人员临时海外出差责任条款','临时海外公干责任条款','游泳池及健身房责任条款'];
        
        const CASE = {
            // 烟草-财产一切险
            'yc_cc_api1_Y':[...YC_CC_1,...YC_CC_2],
            'yc_cc_api1_N':[...YC_CC_1],
            'yc_cc_api2_Y':[...YC_CC_3],
            'yc_cc_api2_N':[...YC_CC_2,...YC_CC_3],

            // 酒店-公众责任险            
            'jd_PL_api1_Y':[...JD_PL_1,...JD_PL_2],
            'jd_PL_api1_N':[...JD_PL_1],
            'jd_PL_api2_Y':[...JD_PL_3],
            'jd_PL_api2_N':[...JD_PL_2,...JD_PL_3],

            // 钢铁-公众责任险
            'gt_PL_api1_Y':[...GT_PL_1,...GT_PL_2],
            'gt_PL_api1_N':[...GT_PL_1],
            'gt_PL_api2_Y':[...GT_PL_3],
            'gt_PL_api2_N':[...GT_PL_2,...GT_PL_3],
        }

        function formatInterface(inId,interface){
            let ret = [];
            let list = [];

            if(!document.querySelector(`#${inId}`).value.length){
                alert("请输入正确的接口返回值")
                return []
            }
            const value = JSON.parse(document.querySelector(`#${inId}`).value);
            if(interface === 1){
                list = value.data.schemeClausesAdditionalList;
            }else if(interface === 2){
                list = value.list;
            }

            ret = list.map(v=>v.clausesName);
            return ret;
        }

        function formatReturn(list){
            return list.map((v,i)=>`<p>${i+1}.${v}</p>`).join("")
        }

        function compare(inId,interface){
            // 参考标准
            var a = CASE[inId]
            // 接口返回
            var b = formatInterface(inId,interface)
            if(!b.length){
                return 
            }

            var sa = new Set(a);
            var sb = new Set(b);
            // 交集
            let intersect = a.filter(x => sb.has(x));
            // 差集
            let less = a.filter(x => !sb.has(x));
            // 差集2
            let more = b.filter(x => !sa.has(x));

            const pre = inId.substr(0,inId.length-1)
            document.querySelector(`#${pre}right`).innerHTML = formatReturn(intersect);
            document.querySelector(`#${pre}more`).innerHTML = formatReturn(more);
            document.querySelector(`#${pre}less`).innerHTML = formatReturn(less);
            console.log("这些没问题：", intersect);
            console.log("返回的数据少了：", more);
            console.log('返回的数据多了',less)
        }
    </script>
</body>
</html>